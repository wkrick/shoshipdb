<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>STO Ship DB</title>
		<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
		<link rel="manifest" href="/site.webmanifest">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
		<link rel="stylesheet" href="index.css">
		<script src="https://cdn.jsdelivr.net/npm/vue@3.0.11/dist/vue.global.prod.js"></script>
		<script src="shipdata.js" defer></script>
		<script src="abilitydata.js" defer></script>
		<script src="attributedata.js" defer></script>
		<script src="index.js" defer></script>
	</head>
	<body>
	<section class="section">
		<div id="app" class="container">
			<h1 class="title is-2">
				STO Ship DB
			</h1>
			
			
			<form v-on:submit.prevent="addNewAttribute">
			
				<div class="field">
					<label for="newAttributeName" class="label">Desired Ship Attributes</label>
					<div class="control">
						<div class="select">
							<select id="newAttributeName" v-model="newAttributeName">
								<option :value="null">Select Attribute</option>
								<option v-for="option in attributeNameOptions" :key="option" :value="option">{{ option }}</option>
							</select>
						</div>
					</div>
					
					<div class="control">
						<div class="select">
							<select v-model="newAttributeComparison" :disabled='!(attributeValueOptions[0] && isFinite(attributeValueOptions[0].value))'>
								<option value="=">=</option>
								<option value="&lt;=">&lt;=</option>
								<option value="&gt;=">&gt;=</option>
							</select>
						</div>

						<div class="select">
							<select v-model="newAttributeValue">
								<option :value="null">Select Value</option>
								<option v-for="option in attributeValueOptions" :value="option.value">{{ option.text }}</option>
							</select>
						</div>
						<button :disabled='!newAttributeValue' class="button is-info"><span class="material-icons">&#xe148;</span></button>
					</div>
					
				</div>
			
			</form>

			<br>
			
			<attribute
				v-for="(attribute, index) in attributes"
				:key="attribute.id"
				:name="attribute.name"
				:comparison="attribute.comparison"
				:value="attribute.value"
				@remove="attributes.splice(index, 1)"
			></attribute>

			<br>
			
			<form v-on:submit.prevent="addNewAbility">
			
				<div class="field">
					<label for="newAbilityType" class="label">Desired Bridge Officer Abilities</label>
					<div class="control">
						<div class="select">
							<select id="newAbilityType" v-model="newAbilityType">
								<option :value="null">Select Type</option>
								<option v-for="option in abilitytypeOptions" :key="option" :value="option">{{ option }}</option>
							</select>
						</div>
					</div>
					<div class="control">
						<div class="select">
							<select id="newAbilityName" v-model="newAbilityName">
								<option :value="null">Select Name</option>
								<option v-for="option in abilitynameOptions" :key="option" :value="option">{{ option }}</option>
							</select>
						</div>
					</div>
					<div class="control">
						<div class="select">
							<select id="newAbilityLevel" v-model="newAbilityLevel">
								<option :value="null">Select Level</option>
								<option v-for="option in abilitylevelOptions" :key="option" :value="option">{{ option }}</option>
							</select>
						</div>
						<button :disabled='!newAbilityLevel' class="button is-info"><span class="material-icons">&#xe148;</span></button>
					</div>
				</div>

			</form>
			
			<br>

			<ability
				v-for="(ability, index) in abilities"
				:key="ability.id"
				:type="ability.type"
				:name="ability.name"
				:level="ability.level"
				:rank="ability.rank"
				@remove="abilities.splice(index, 1)"
			></ability>

			<br>
			
			<label class="label">Matching Ships: {{ rows.length }} out of {{ allShips.length }}</label>

			<table v-show="rows.length" class="table">
				<tr>
					<th>Ship Name</th>
				</tr>
				<tr v-for="ship in rows">
					<td><a v-bind:href="ship.url">{{ ship.name }}</a></td>
				</tr>
			</table>
			
		</div>
	</section>
	</body>
</html>
